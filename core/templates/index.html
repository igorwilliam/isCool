{% extends "base.html" %}
{% load widget_tweaks %}


{% block container %}

<br><br><br><br>
{# gambiarra #}
  <div class="container">

    <div class="card border-primary">
      <div class="card-body">


        <ul class="nav nav-tabs nav-justified" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#postar_topico" role="tab" aria-controls="home" aria-selected="true">Postar Tópico</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Postar outro</a>
          </li>

        </ul>

        <div class="tab-content">

          <div class="tab-pane fade show active" id="postar_topico" role="tabpanel" >
            <form class="" action="{% url 'post:newTopic' %}" method="post">
              {% csrf_token %}
              {% for field in form %}
                {% with WIDGET_ERROR_CLASS='my_error' WIDGET_REQUIRED_CLASS='my_required' %}
                  {% render_field field class='form-control' %}
                  {# {% for error in field. %} #}

                  {# {% endfor %} #}
                {% endwith %}
              {% endfor %}
              <button type="submit" class="btn btn-primary">Postar</button>
            </form>

          </div>

          <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">2</div>

        </div>




        </div>
      </div>
  </div>

{% for topic in topics %}

  <div class="modal fade" id="modal{{topic.id}}" tabindex="-1" role="dialog" aria-labelledby="modal{{topic.id}}Label" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modal{{topic.id}}Label1">{{ topic }}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
        </div>
        <div class="modal-body">

          <div class="container-fluid">
            <div class="row">
              <div class="col">
                <p class="lead">{{ topic.content}}</p>
                <div class="row">

                  <div class="col">

                    <table class="table table-hover table-active">
                        <tbody>

                          {% for reply in replies %}
                            {% if reply.topic.id == topic.id %}
                              <tr><td>{{reply.content}}</td></tr>
                            {% endif %}
                          {% endfor %}

                        </tbody>
                      </table>


                  </div>
                </div>


              </div>
            </div>
          </div>


        </div>
      </div>
    </div>
  </div>

<br>

      <div class="container">

        <div class="card">
          <div class="card-header font-weight-bold">
            {{ topic }}
          </div>

          <div class="card-body">
            <div class="card-text"><p class="lead"> {{ topic.content|linebreaks }} </p></div>
            <div class="row">
              <button type="button" class="btn btn-outline-primary display-2" data-toggle="modal" data-target="#modal{{topic.id}}">Ler Comentários</button>
              <p class="card-text text-right"><small class="text-muted">Last updated 3 mins ago</small></p>
            </div>

          </div>

          <div class="card-footer ">
            <a href="#" class="badge badge-danger">Danger</a>


            <small>palavras chave bababababababababababababbbbbb</small>
          </div>

        </div>
      </div>

      {# temporario #}
      <br>

    {% endfor %}
  {% endblock %}
